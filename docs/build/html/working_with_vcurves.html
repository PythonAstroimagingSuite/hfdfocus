

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Using V Curves &mdash; hfdfocus 0.1 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Using autofocus_auto_star.py" href="autofocus_auto_star.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> hfdfocus
          

          
          </a>

          
            
            
              <div class="version">
                0.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="autofocus_hfd_script.html">Using autofocus_hfd_script.py</a></li>
<li class="toctree-l1"><a class="reference internal" href="autofocus_auto_star.html">Using autofocus_auto_star.py</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Using V Curves</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="#capturing-v-curves-with-capture-vcurve-script-py">Capturing V Curves With capture_vcurve_script.py</a></li>
<li class="toctree-l2"><a class="reference internal" href="#averaging-v-curves-with-average-curve-runs-py">Averaging V Curves With average_curve_runs.py</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">hfdfocus</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Using V Curves</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/working_with_vcurves.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="using-v-curves">
<h1>Using V Curves<a class="headerlink" href="#using-v-curves" title="Permalink to this headline">¶</a></h1>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>A “V Curve” is a graph of the size of a star (measured as a half flux radius, or HFD)
versus focus position.  The name refers to the shape of the graph as the star
will shrink as best focus is approached and then grow larger after it is passed.</p>
<p>For a given imaging telescope a V Curve will need to be captured in order to
train the autofocus routine.  Actually several V Curves are normally captured and
then averaged together.</p>
</div>
<div class="section" id="capturing-v-curves-with-capture-vcurve-script-py">
<h2>Capturing V Curves With capture_vcurve_script.py<a class="headerlink" href="#capturing-v-curves-with-capture-vcurve-script-py" title="Permalink to this headline">¶</a></h2>
<p>The program “capture_vcurve_script.py” is used for the automated capture of
V Curves.  The program will run a specified number of V Curve captures.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>usage: capture_vcurve_script.py <span class="o">[</span>-h<span class="o">]</span> <span class="o">[</span>--debugplots<span class="o">]</span> <span class="o">[</span>--simul<span class="o">]</span>
                                <span class="o">[</span>--focuser_driver FOCUSER_DRIVER<span class="o">]</span>
                                <span class="o">[</span>--camera_driver CAMERA_DRIVER<span class="o">]</span>
                                <span class="o">[</span>--exposure_start EXPOSURE_START<span class="o">]</span>
                                <span class="o">[</span>--exposure_min EXPOSURE_MIN<span class="o">]</span>
                                <span class="o">[</span>--exposure_max EXPOSURE_MAX<span class="o">]</span>
                                <span class="o">[</span>--saturation SATURATION<span class="o">]</span>
                                <span class="o">[</span>--starflux_min STARFLUX_MIN<span class="o">]</span>
                                <span class="o">[</span>--framesize FRAMESIZE<span class="o">]</span>
                                <span class="o">[</span>--runoffset RUNOFFSET<span class="o">]</span>
                                <span class="o">[</span>--hfdcutoff HFDCUTOFF<span class="o">]</span> <span class="o">[</span>--bgthres BGTHRES<span class="o">]</span>
                                focus_center focus_range focus_nstep focus_dir
                                nruns

positional arguments:
  focus_center          Center position of focus run
  focus_range           Range of focus run
  focus_nstep           V Curve number of steps
  focus_dir             IN or OUT
  nruns                 Number of vcurve runs

optional arguments:
  -h, --help            show this <span class="nb">help</span> message and <span class="nb">exit</span>
  --debugplots          show debug plots
  --simul               Simulate star
  --focuser_driver FOCUSER_DRIVER
                        Focuser Driver
  --camera_driver CAMERA_DRIVER
                        Camera Driver
  --exposure_start EXPOSURE_START
                        Starting exposure value
  --exposure_min EXPOSURE_MIN
                        Minimum exposure value
  --exposure_max EXPOSURE_MAX
                        Maximum exposure value
  --saturation SATURATION
                        Saturation level <span class="k">for</span> sensor
  --starflux_min STARFLUX_MIN
                        Maximum flux in star
  --framesize FRAMESIZE
                        Size of capture frame, <span class="nv">0</span><span class="o">=</span>full
  --runoffset RUNOFFSET
                        Shift center of run by this amount
  --hfdcutoff HFDCUTOFF
                        Ignore points with HFD less than this value
  --bgthres BGTHRES     Threshold multiplier <span class="k">for</span> star detection
</pre></div>
</div>
<p>When run it will create a directory with a named based on the current data and time
and fill it with the images captured at each focus position.  It will also create
a file called “vcurve_fits.json” which contains the fit parameters for each V Curve
captured.  This file is the important output we need.</p>
</div>
<div class="section" id="averaging-v-curves-with-average-curve-runs-py">
<h2>Averaging V Curves With average_curve_runs.py<a class="headerlink" href="#averaging-v-curves-with-average-curve-runs-py" title="Permalink to this headline">¶</a></h2>
<p>Once we have run a series of V Curves we can average them to create a better
estimate of the autofocus parameters needed.  The script “average_vcurve_runs.py”
is used for this purpose.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>usage: average_vcurve_runs.py <span class="o">[</span>-h<span class="o">]</span> <span class="o">[</span>--debugplots<span class="o">]</span> vcurve_file

positional arguments:
  vcurve_file   V Curve filename

optional arguments:
  -h, --help    show this <span class="nb">help</span> message and <span class="nb">exit</span>
  --debugplots  show debug plots
</pre></div>
</div>
<p>Basically pass it the path and name of the “vcurve_fits.json” file which is to be averaged.
It will right out a JSON string containing the best fit parameters.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="autofocus_auto_star.html" class="btn btn-neutral float-left" title="Using autofocus_auto_star.py" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Michael Fulbright

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>